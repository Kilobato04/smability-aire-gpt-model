version: 0.2

phases:
  install:
    runtime-versions:
      python: 3.11
    commands:
      - echo "ğŸ“¦ Instalando librerÃ­as..."
      - pip install pandas xgboost scikit-learn boto3 numpy requests

  pre_build:
    commands:
      - echo "â¬‡ï¸ Descargando Dataset Maestro desde S3..."
      # Usamos S3 porque es la vÃ­a rÃ¡pida y segura
      - aws s3 cp s3://smability-data-lake/raw_data/dataset_aire_zmcdmx.zip /tmp/dataset.zip
      - echo "ğŸ“‚ Descomprimiendo..."
      - unzip /tmp/dataset.zip -d /tmp/dataset_final

  build:
    commands:
      - echo "ğŸ§  INICIANDO ENTRENAMIENTO GRAND SLAM (5 Contaminantes)..."
      # Apuntamos a la carpeta correcta donde estÃ¡ tu script
      - python training/train_v5_grand_slam.py

  post_build:
    commands:
      - echo "âœ… Entrenamiento finalizado."
