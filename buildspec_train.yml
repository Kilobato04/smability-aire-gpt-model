version: 0.2

phases:
  install:
    runtime-versions:
      python: 3.11
    commands:
      - echo "ğŸ“¦ Instalando librerÃ­as de Ciencia de Datos..."
      - pip install pandas xgboost scikit-learn boto3 numpy requests

  pre_build:
    commands:
      - echo "â¬‡ï¸ Descargando Dataset Maestro desde S3..."
      # Ajusta el nombre del bucket y archivo si es necesario
      - aws s3 cp s3://smability-data-lake/raw_data/dataset_aire_zmcdmx.zip /tmp/dataset.zip
      - echo "ğŸ“‚ Descomprimiendo..."
      - unzip /tmp/dataset.zip -d /tmp/dataset_final
      # Confirmamos que los CSVs estÃ¡n ahÃ­
      - ls -l /tmp/dataset_final

  build:
    commands:
      - echo "ğŸ§  INICIANDO ENTRENAMIENTO GRAND SLAM (5 Contaminantes)..."
      - python train_v5_grand_slam.py

  post_build:
    commands:
      - echo "âœ… Entrenamiento finalizado."
      - echo "Los modelos .json han sido enviados a S3."
